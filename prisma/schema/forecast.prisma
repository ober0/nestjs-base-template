enum ForecastTypes {
  Express
  Ordinar

  @@map("forecast_types")
}

model Forecast {
  uuid String @id @default(uuid()) @db.Uuid

  user     User   @relation(fields: [userUuid], references: [uuid], onDelete: Cascade)
  userUuid String @map("user_uuid") @db.Uuid

  matches ForecastMatch[]
  chat    Chat?

  forecast Json          @db.JsonB
  type     ForecastTypes

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([userUuid])
  @@map("forecast")
}

model ForecastMatch {
  forecast     Forecast @relation(fields: [forecastUuid], references: [uuid], onDelete: Cascade)
  forecastUuid String   @map("forecast_uuid") @db.Uuid

  match     Match  @relation(fields: [matchUuid], references: [uuid], onDelete: Cascade)
  matchUuid String @map("match_uuid") @db.Uuid

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@id([forecastUuid, matchUuid])
  @@map("forecast_match")
}
